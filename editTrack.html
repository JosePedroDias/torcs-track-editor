<html>
  <head>
    <meta charset="utf-8">
    
    <title>edit track</title>
    
    <link rel="stylesheet" href="editTrack.css">
  </head>
  <body>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/snabbdom.js"></script>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/snabbdom-attributes.js"></script>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/snabbdom-class.js"></script>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/snabbdom-eventlisteners.js"></script>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/snabbdom-patch.js"></script>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/snabbdom-props.js"></script>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/snabbdom-style.js"></script>
    <script src="https://rawgit.com/snabbdom/snabbdom/master/dist/h.js"></script>

    <div id="gui"></div>

    <script src="libs/ajax.js"></script>
    <script src="libs/fileIO.js"></script>
    <script src="libs/fakeCtx.js"></script>
    <script src="libs/turtle.js"></script>
    <script src="libs/road.js"></script>
    <script src="libs/track.js"></script>
    <script src="libs/trackForm.js"></script>

    <script>
      let trackName = 'tracks/basic.xml'; // empty / basic

      if (location.hash) {
        let url = location.hash.substring(1);
        if (url.indexOf('://') !== -1) { // cors
          url = url.split('://')[1];
          url = 'https://cors-anywhere.herokuapp.com/' + url;
        }
        trackName = url;
      }

      ajax(trackName, function(err, track) {
        if (err) {
          return window.alert('Problem loading track ' + trackName);
        }
        const fn = trackName.split('/').pop();
        editTrack(track, fn);
      });
    </script>
  </body>
</html>